<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>営業KPI</title>

<style>
body{
  font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",sans-serif;
  max-width:520px;
  margin:auto;
  padding:20px;
  background:#f2f4f7;
  color:#333;
}

h2{
  text-align:center;
}

.card{
  background:white;
  padding:15px;
  border-radius:10px;
  margin-top:15px;
}

button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  background:black;
  color:white;
  font-size:16px;
}

input{
  width:100%;
  padding:8px;
  margin-top:5px;
  margin-bottom:10px;
}

label{
  display:block;
  margin-top:10px;
}
</style>

</head>

<body>

<h2>営業KPI</h2>

<div class="card">

<label>店舗選択</label>
<select id="storeSelect" onchange="changeStore()">
<option value="adachi">足立店</option>
<option value="edogawa">江戸川店</option>
</select>

</div>

<div class="card">

<h3>契約追加</h3>

<input type="number" id="rate" placeholder="生保率(%)">
<input type="number" id="futai" placeholder="商品付帯金額(円)">

<label><input type="checkbox" id="premium"> プレミアム加入</label>
<label><input type="checkbox" id="iryo"> 医保加入</label>
<label><input type="checkbox" id="food"> フード定期</label>
<label><input type="checkbox" id="hospital"> 病院予約</label>

<button onclick="addContract()">契約追加</button>

</div>

<div class="card">

<h3>現在状況</h3>

<div id="status"></div>

</div>

<script>

// 店舗ごとの目標
const storeTargets = {
  adachi: 27,
  edogawa: 16
};

// 現在の店舗
let currentStore = "adachi";

// 現在の目標
let targetCount = storeTargets[currentStore];

// 実績
let salesCount = 0;
let premiumCount = 0;
let iryoCount = 0;
let foodCount = 0;

function changeStore(){

  currentStore =
    document.getElementById("storeSelect").value;

  targetCount =
    storeTargets[currentStore];

  updateStatus();

}

function addContract(){

  salesCount++;

  if(document.getElementById("premium").checked)
    premiumCount++;

  if(document.getElementById("iryo").checked)
    iryoCount++;

  if(document.getElementById("food").checked)
    foodCount++;

  updateStatus();

}

function updateStatus(){

  let remain =
    targetCount - salesCount;

  let premiumRate =
    salesCount ? (premiumCount/salesCount*100).toFixed(1) : 0;

  let iryoRate =
    salesCount ? (iryoCount/salesCount*100).toFixed(1) : 0;

  let foodRate =
    salesCount ? (foodCount/salesCount*100).toFixed(1) : 0;

  document.getElementById("status").innerHTML =

  `
販売頭数： ${salesCount} / ${targetCount}
（残り ${remain}）

生保率： ${premiumRate}%

医保率： ${iryoRate}%

フード率： ${foodRate}%
  `;

}

// 初期表示
updateStatus();

</script>

</body>
</html>
